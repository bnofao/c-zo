# Product Category Type Definitions and Operations
# API Version: v1
# Rate Limits: 500 req/min per user

"""
Hierarchical product category using adjacency list pattern
"""
type ProductCategory {
  id: ID!
  name: String!
  description: String!
  handle: String!
  isActive: Boolean!
  isInternal: Boolean!
  rank: Int!
  thumbnail: String
  metadata: JSON
  createdAt: DateTime!
  updatedAt: DateTime!
  
  # Relations
  image: ProductImage
  parent: ProductCategory
  children: [ProductCategory!]!
  products: [Product!]!
}

"""
Category tree node with nested children
"""
type CategoryNode {
  category: ProductCategory!
  children: [CategoryNode!]!
  depth: Int!
}

"""
Input for creating a new category
"""
input CreateCategoryInput {
  name: String!
  description: String = ""
  handle: String
  parentId: ID
  isActive: Boolean = false
  isInternal: Boolean = false
  rank: Int = 0
  imageId: String
  thumbnail: String
  metadata: JSON
}

"""
Input for updating an existing category
"""
input UpdateCategoryInput {
  name: String
  description: String
  handle: String
  parentId: ID
  isActive: Boolean
  isInternal: Boolean
  rank: Int
  imageId: String
  thumbnail: String
  metadata: JSON
  expectedUpdatedAt: DateTime!
}

"""
Category mutation response payload
"""
type CategoryPayload {
  category: ProductCategory
  errors: [Error!]
}

# Query Examples:

# Get a single category
# query GetCategory {
#   category(id: "cat_123") {
#     id
#     name
#     handle
#     image {
#       id
#       url
#       rank
#     }
#     parent {
#       id
#       name
#     }
#     children {
#       id
#       name
#       rank
#     }
#   }
# }

# Get category tree
# query GetCategoryTree {
#   categoryTree(rootCategoryId: "cat_root") {
#     category {
#       id
#       name
#       handle
#     }
#     children {
#       category {
#         id
#         name
#       }
#       children {
#         category {
#           id
#           name
#         }
#       }
#     }
#     depth
#   }
# }

# Mutation Examples:

# Create a category
# mutation CreateCategory {
#   createCategory(
#     input: {
#       name: "Laptops"
#       description: "Laptop computers"
#       parentId: "cat_electronics"
#       isActive: true
#       rank: 1
#       imageId: "img_laptop_category"
#     }
#   ) {
#     category {
#       id
#       name
#       handle
#       parent {
#         id
#         name
#       }
#     }
#     errors {
#       message
#     }
#   }
# }

# Assign product to categories
# mutation AssignCategories {
#   assignProductToCategories(
#     productId: "prod_123"
#     categoryIds: ["cat_electronics", "cat_laptops", "cat_gaming"]
#   ) {
#     product {
#       id
#       categories {
#         id
#         name
#       }
#     }
#   }
# }

