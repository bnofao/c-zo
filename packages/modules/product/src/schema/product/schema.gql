# Product Type Definitions and Operations
# User Story 1: Basic Product Management

"""
Core product entity representing a marketplace item
"""
type Product {
  id: ID!
  title: String!
  handle: String!
  subtitle: String
  description: String
  isGiftcard: Boolean!
  status: ProductStatus!
  thumbnail: String
  weight: String
  length: String
  height: String
  width: String
  originCountry: String
  hsCode: String
  midCode: String
  material: String
  discountable: Boolean!
  externalId: String
  metadata: JSON
  createdAt: DateTime!
  updatedAt: DateTime!
  
  # Relations (to be implemented in later user stories)
  collection: ProductCollection
  type: ProductType
  variants: [ProductVariant!]!
  categories: [ProductCategory!]!
  tags: [ProductTag!]!
  options: [ProductOption!]!
  images: [ProductImage!]!
}

"""
Product status enum
"""
enum ProductStatus {
  DRAFT
  PROPOSED
  PUBLISHED
  REJECTED
}

"""
Product connection for pagination
"""
type ProductConnection {
  nodes: [Product!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

"""
Input for creating a new product
"""
input CreateProductInput {
  title: String!
  handle: String
  subtitle: String
  description: String
  isGiftcard: Boolean = false
  status: ProductStatus = DRAFT
  thumbnail: String
  weight: String
  length: String
  height: String
  width: String
  originCountry: String
  hsCode: String
  midCode: String
  material: String
  collectionId: ID
  typeId: ID
  discountable: Boolean = true
  externalId: String
  metadata: JSON
}

"""
Input for updating an existing product
"""
input UpdateProductInput {
  title: String
  subtitle: String
  description: String
  status: ProductStatus
  thumbnail: String
  weight: String
  length: String
  height: String
  width: String
  originCountry: String
  hsCode: String
  midCode: String
  material: String
  collectionId: ID
  typeId: ID
  discountable: Boolean
  externalId: String
  metadata: JSON
  expectedUpdatedAt: DateTime!
}

"""
Product filter input for list queries
"""
input ProductFilter {
  status: ProductStatus
  collectionId: ID
  typeId: ID
  isGiftcard: Boolean
  discountable: Boolean
  search: String
}

"""
Product sort options
"""
input ProductSort {
  field: ProductSortField!
  direction: SortDirection = ASC
}

enum ProductSortField {
  TITLE
  CREATED_AT
  UPDATED_AT
  STATUS
}

"""
Product mutation response payload
"""
type ProductPayload {
  product: Product
  errors: [Error!]
}

extend type Query {
  """Get a single product by ID"""
  product(id: ID!): Product
  
  """List products with filtering and pagination"""
  products(
    filter: ProductFilter
    sort: ProductSort
    pagination: PaginationInput
  ): ProductConnection!
}

extend type Mutation {
  """Create a new product"""
  createProduct(input: CreateProductInput!): ProductPayload!
  
  """Update an existing product"""
  updateProduct(id: ID!, input: UpdateProductInput!): ProductPayload!
  
  """Soft-delete a product"""
  deleteProduct(id: ID!): DeletePayload!
}
