# Product Variant Type Definitions and Operations
# User Story 2: Product Variants Management

"""
Product variant representing a specific variation of a product
"""
type ProductVariant {
  id: ID!
  title: String!
  sku: String
  barcode: String
  ean: String
  upc: String
  allowBackorder: Boolean!
  manageInventory: Boolean!
  hsCode: String
  originCountry: String
  thumbnail: String
  midCode: String
  material: String
  weight: Int
  length: Int
  height: Int
  width: Int
  variantRank: Int!
  metadata: JSON
  createdAt: DateTime!
  updatedAt: DateTime!
  
  # Relations
  product: Product!
  optionValues: [ProductOptionValue!]! # US4
  images: [ProductImage!]! # US7
}

"""
Input for creating a new variant
"""
input CreateVariantInput {
  title: String!
  sku: String
  barcode: String
  ean: String
  upc: String
  allowBackorder: Boolean = false
  manageInventory: Boolean = true
  hsCode: String
  originCountry: String
  thumbnail: String
  midCode: String
  material: String
  weight: Int
  length: Int
  height: Int
  width: Int
  variantRank: Int = 0
  metadata: JSON
}

"""
Input for updating an existing variant
"""
input UpdateVariantInput {
  title: String
  sku: String
  barcode: String
  ean: String
  upc: String
  allowBackorder: Boolean
  manageInventory: Boolean
  hsCode: String
  originCountry: String
  thumbnail: String
  midCode: String
  material: String
  weight: Int
  length: Int
  height: Int
  width: Int
  variantRank: Int
  metadata: JSON
  expectedUpdatedAt: DateTime!
}

"""
Variant mutation response payload
"""
type VariantPayload {
  variant: ProductVariant
  errors: [Error!]
}

extend type Query {
  """Get a single variant by ID"""
  variant(id: ID!): ProductVariant
}

extend type Mutation {
  """Create a new product variant"""
  createProductVariant(productId: ID!, input: CreateVariantInput!): VariantPayload!
  
  """Update an existing variant"""
  updateProductVariant(id: ID!, input: UpdateVariantInput!): VariantPayload!
  
  """Soft-delete a variant"""
  deleteProductVariant(id: ID!): DeletePayload!
}

