---
github_number: 22
title: "As a developer, I want transparent caching"
status: synced
type: feature
priority: high
epic: 20
prd: kit
assignees: []
labels: [type:feature, priority:high, module:kit]
created: 2026-02-04
updated: 2026-02-04
---

## Context
From PRD: kit
Feature: Cache Hybride (Nitro + CacheManager)
Priority: P0 (Must-Have)

## Description
Approche hybride exploitant le cache natif Nitro (`defineCachedFunction`) avec un wrapper léger pour l'invalidation

## User Story
**As a** developer
**I want to** have transparent caching
**So that** frequent reads don't hit the database

## Acceptance Criteria
- [ ] **Nitro Cache pour les reads déclaratifs :**
  - [ ] Utilisation de `defineCachedFunction` pour les queries
  - [ ] SWR (stale-while-revalidate) activé par défaut
  - [ ] Configuration TTL via `maxAge`
  - [ ] Custom cache keys via `getKey()`
- [ ] **CacheManager léger pour l'invalidation :**
  - [ ] `delete(key)` : suppression d'une clé
  - [ ] `deleteMany(keys)` : suppression en batch
  - [ ] `invalidate(pattern)` : invalidation par pattern glob
  - [ ] `has(key)` : vérification d'existence
  - [ ] `getOrSet(key, factory, ttl)` : pour les cas hors `defineCachedFunction`
- [ ] Namespace support via `useCacheManager(prefix)`
- [ ] Configuration storage dans `nitro.config.ts` (memory/Redis)

## Dependencies
nitropack/runtime (useStorage, defineCachedFunction)

## Related
- PRD: docs/planning/kit/prd.md
- TRD: docs/planning/kit/trd.md
- Epic: #20
