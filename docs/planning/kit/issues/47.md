---
github_number: 47
title: "Stack d'Observabilité Complète (OpenTelemetry)"
status: synced
type: feature
priority: low
epic: 43
prd: kit
assignees: []
labels: [type:feature, priority:low]
created: 2026-02-10
updated: 2026-02-10
---

## Context
From PRD: kit-microservices (Feature 9)
Priority: P2 — Phase 3+
Epic: #43

## Description
Monitoring distribué complet avec traces, métriques et logs corrélés via OpenTelemetry. Permet de tracer une requête à travers tous les services pour debugger les problèmes en environnement distribué.

## User Story
**As a** développeur/ops
**I want to** tracer une requête à travers tous les services
**So that** je puisse debugger les problèmes en environnement distribué

## Acceptance Criteria

### Tracing distribué
- [ ] Jaeger ou Tempo pour la visualisation des traces
- [ ] Traces cross-service via `correlationId`
- [ ] Spans pour chaque appel HTTP, gRPC/tRPC, et AMQP

### Métriques
- [ ] Prometheus + Grafana
- [ ] Latence p50/p99 par service
- [ ] Queue depth RabbitMQ
- [ ] Error rate par service
- [ ] RabbitMQ metrics (message rate, consumer lag)

### Logs structurés
- [ ] Loki/Grafana pour l'agrégation
- [ ] `correlationId` dans chaque ligne de log
- [ ] Format JSON structuré

### Protocole
- [ ] OpenTelemetry (OTLP) pour l'export des traces, métriques et logs
- [ ] SDK OpenTelemetry intégré dans chaque service

### Propagation du correlationId
- [ ] HTTP headers (`X-Correlation-Id`)
- [ ] AMQP message properties (`correlation_id`)
- [ ] Logs (champ structuré)

## Dependencies
- Tous les services doivent intégrer le SDK OpenTelemetry
- Infrastructure : Jaeger/Tempo, Prometheus, Grafana, Loki

## Notes
> Cette feature est P2 (Phase 3+). Elle ne sera implémentée que lorsque l'architecture microservices sera en place. Cependant, le `correlationId` dans les events (Feature 2) prépare cette intégration dès Phase 0.

## Related
- PRD: docs/planning/kit/prd-microservices.md
- TRD: docs/planning/kit/trd-microservices.md
- Epic: #43
