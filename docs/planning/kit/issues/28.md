---
github_number: 28
title: "Implement createQueries builder"
status: synced
type: task
priority: high
epic: 20
prd: kit
assignees: []
labels: [priority:high, module:kit, type:task]
created: 2026-02-04
updated: 2026-02-08
---

## Context
From TRD: kit
Section: 3.1 Repository - Builders Implementation
Parent Feature: #21 (Repository Générique)

## Technical Requirements

Implement the `createQueries` builder for read-only operations:

```typescript
export function createQueries<T extends BaseEntity, TTable extends PgTable>(
  db: DrizzleDatabase,
  config: BaseConfig<TTable>
)
```

### Methods to implement:
- `findById(id: string): Promise<T | null>`
- `findByIds(ids: string[]): Promise<T[]>`
- `findOne(where: WhereClause<T>): Promise<T | null>`
- `findMany(options: FindManyOptions<T>): Promise<PaginatedResult<T>>`
- `count(where?: WhereClause<T>): Promise<number>`
- `exists(where: WhereClause<T>): Promise<boolean>`

### Requirements:
- Support soft-delete filtering (exclude `deletedAt IS NOT NULL`)
- Implement `applyWhere` and `applyOrderBy` utility functions
- Pagination with offset + cursor support
- Return `_db`, `_table`, `_config` for extension

## Acceptance Criteria
- [ ] Implementation matches TRD specification
- [ ] All 6 query methods implemented
- [ ] Soft-delete filtering works correctly
- [ ] Pagination returns correct `PaginatedResult<T>`
- [ ] Unit tests written
- [ ] Code reviewed

## Related
- TRD: docs/planning/kit/trd.md (Section 3.1)
- PRD: docs/planning/kit/prd.md
- Epic: #20
- Parent: #21
